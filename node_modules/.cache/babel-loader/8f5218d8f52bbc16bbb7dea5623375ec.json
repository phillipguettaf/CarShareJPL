{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/phill/Documents/RMIT/2019Sem1/COSC2408/JPLCarShare/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"/Users/phill/Documents/RMIT/2019Sem1/COSC2408/JPLCarShare/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/phill/Documents/RMIT/2019Sem1/COSC2408/JPLCarShare/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/phill/Documents/RMIT/2019Sem1/COSC2408/JPLCarShare/node_modules/@babel/runtime/helpers/inherits\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _transaction = _interopRequireDefault(require(\"../../transaction\"));\n\nvar _lodash = require(\"lodash\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar debug = require('debug')('knex:tx');\n\nvar Transaction_MySQL2 =\n/*#__PURE__*/\nfunction (_transaction$default) {\n  _inherits(Transaction_MySQL2, _transaction$default);\n\n  function Transaction_MySQL2() {\n    _classCallCheck(this, Transaction_MySQL2);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Transaction_MySQL2).apply(this, arguments));\n  }\n\n  return Transaction_MySQL2;\n}(_transaction.default);\n\n(0, _lodash.assign)(Transaction_MySQL2.prototype, {\n  query: function query(conn, sql, status, value) {\n    var _this = this;\n\n    var t = this;\n    var q = this.trxClient.query(conn, sql).catch(function (err) {\n      return err.code === 'ER_SP_DOES_NOT_EXIST';\n    }, function () {\n      _this.trxClient.logger.warn('Transaction was implicitly committed, do not mix transactions and ' + 'DDL with MySQL (#805)');\n    }).catch(function (err) {\n      status = 2;\n      value = err;\n      t._completed = true;\n      debug('%s error running transaction query', t.txid);\n    }).tap(function () {\n      if (status === 1) t._resolver(value);\n\n      if (status === 2) {\n        if ((0, _lodash.isUndefined)(value)) {\n          value = new Error(\"Transaction rejected with non-error: \".concat(value));\n        }\n\n        t._rejecter(value);\n      }\n    });\n\n    if (status === 1 || status === 2) {\n      t._completed = true;\n    }\n\n    return q;\n  }\n});\nvar _default = Transaction_MySQL2;\nexports.default = _default;\nmodule.exports = exports.default;","map":null,"metadata":{},"sourceType":"script"}