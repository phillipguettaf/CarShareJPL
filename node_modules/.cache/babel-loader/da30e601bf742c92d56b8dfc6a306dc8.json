{"ast":null,"code":"import _classCallCheck from \"/Users/phill/Documents/RMIT/2019Sem1/COSC2408/JPLCarShare/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/phill/Documents/RMIT/2019Sem1/COSC2408/JPLCarShare/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/phill/Documents/RMIT/2019Sem1/COSC2408/JPLCarShare/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/phill/Documents/RMIT/2019Sem1/COSC2408/JPLCarShare/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/phill/Documents/RMIT/2019Sem1/COSC2408/JPLCarShare/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/phill/Documents/RMIT/2019Sem1/COSC2408/JPLCarShare/src/CarList.js\";\nimport React, { Component } from 'react';\n\nvar knex = require('knex')(require('../server/db/knexfile'));\n\nvar CarList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CarList, _Component);\n\n  function CarList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CarList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CarList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      cars: getCars()\n    };\n    return _this;\n  }\n\n  _createClass(CarList, [{\n    key: \"sortCars\",\n    value: function sortCars(userposition, cars) {\n      var userlat = userposition.coords.latitude;\n      var userlong = userposition.coords.longitude;\n      this.state.cars.sort(function (a, b) {\n        if (getDistance(userlat, userlong, a.latitude, a.longitude) < getDistance(userlat, userlong, b.latitude, b.longitude)) {\n          return -1;\n        } else {\n          return 1;\n        }\n\n        ;\n      });\n    }\n    /**\tGets the distance between two points (lat1, lon1) & (lat2, long2)\n    *\tand returns it in metres\n    *\tFunction uses the Haversine distance\n    *\tImplementation adapted from GeoSourceData.com's function in Javascript\n    **/\n\n  }, {\n    key: \"getDistance\",\n    value: function getDistance(lat1, lon1, lat2, lon2) {\n      var SEMI_CIRCLE_DEGREES = 180;\n      var radlat1 = Math.PI * lat1 / SEMI_CIRCLE_DEGREES;\n      var radlat2 = Math.PI * lat2 / SEMI_CIRCLE_DEGREES;\n      var radlon1 = Math.PI * lon1 / SEMI_CIRCLE_DEGREES;\n      var radlon2 = Math.PI * lon2 / SEMI_CIRCLE_DEGREES;\n      var theta = lon1 - lon2;\n      var radtheta = Math.PI * theta / SEMI_CIRCLE_DEGREES;\n      var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n      dist = Math.acos(dist);\n      dist = dist * SEMI_CIRCLE_DEGREES / Math.PI;\n      dist = dist * (SEMI_CIRCLE_DEGREES / 2) * 1.1515;\n      dist = dist * 1.609344;\n      return dist;\n    }\n  }, {\n    key: \"getCars\",\n    value: function getCars() {\n      return knex.select().from('cars');\n    }\n  }, {\n    key: \"render\",\n    value: function render(props) {\n      var carlist = this.state.cars.map(function (car, rego) {\n        return React.createElement(\"li\", {\n          key: car.rego,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, car.make);\n      });\n      return React.createElement(\"div\", {\n        classname: \"CarList\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, carlist));\n    }\n  }]);\n\n  return CarList;\n}(Component);\n\nexport default CarList;","map":{"version":3,"sources":["/Users/phill/Documents/RMIT/2019Sem1/COSC2408/JPLCarShare/src/CarList.js"],"names":["React","Component","knex","require","CarList","state","cars","getCars","userposition","userlat","coords","latitude","userlong","longitude","sort","a","b","getDistance","lat1","lon1","lat2","lon2","SEMI_CIRCLE_DEGREES","radlat1","Math","PI","radlat2","radlon1","radlon2","theta","radtheta","dist","sin","cos","acos","select","from","props","carlist","map","car","rego","make"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nconst knex = require('knex')(require('../server/db/knexfile'));\n\nclass CarList extends Component {\n\n\tstate = {\n\t\tcars: getCars()\n\t};\n\n\n\tsortCars(userposition, cars) {\n\t\tvar userlat = userposition.coords.latitude;\n\t\tvar userlong = userposition.coords.longitude;\n\n\t\tthis.state.cars.sort(function(a,b) {\n\t\t\tif (getDistance(userlat, userlong, a.latitude, a.longitude) < getDistance(userlat, userlong, b.latitude, b.longitude)) {\n\t\t\t\treturn -1;\n\t\t\t} else {\n\t\t\t\treturn 1;\n\t\t\t};\n\t\t});\n\t}\n\n\t/**\tGets the distance between two points (lat1, lon1) & (lat2, long2)\n\t*\tand returns it in metres\n\t*\tFunction uses the Haversine distance\n\t*\tImplementation adapted from GeoSourceData.com's function in Javascript\n\t**/\n\n\tgetDistance(lat1, lon1, lat2, lon2) {\n\t\tconst SEMI_CIRCLE_DEGREES = 180;\n\t    var radlat1 = Math.PI * lat1/SEMI_CIRCLE_DEGREES;\n\t    var radlat2 = Math.PI * lat2/SEMI_CIRCLE_DEGREES;\n\t    var radlon1 = Math.PI * lon1/SEMI_CIRCLE_DEGREES;\n\t    var radlon2 = Math.PI * lon2/SEMI_CIRCLE_DEGREES;\n\t    var theta = lon1-lon2;\n\t    var radtheta = Math.PI * theta/SEMI_CIRCLE_DEGREES;\n\t    var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n\t    dist = Math.acos(dist);\n\t    dist = dist * SEMI_CIRCLE_DEGREES/Math.PI;\n\t    dist = dist * (SEMI_CIRCLE_DEGREES / 2) * 1.1515;\n\t    dist = dist * 1.609344;\n\t    return dist\n\t}\n\n\tgetCars() {\n\t\treturn knex.select().from('cars');\n\t}\n\n\trender(props) {\n\t\tconst carlist = this.state.cars.map((car, rego)=>\n\t\t\t\t<li key={car.rego}>{car.make}</li>\n\t\t\t\t);\n\t\treturn (\n\t\t\t\n\t\t\t<div classname=\"CarList\">\n\t\t\t\t<ul>\n\t\t\t\t\t{carlist}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default CarList;\n"]},"metadata":{},"sourceType":"module"}